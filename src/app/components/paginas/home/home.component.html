<!-- src/app/components/paginas/home/home.component.html -->
<div class="home-container">
  <div class="header-row">
    <div>
      <h2 class="titulo-bienvenida">Â¡Bienvenido, {{ usuarioNombre }}!</h2>
      <p class="lead">Encuentra un profesional y agenda tu cita fÃ¡cilmente</p>
    </div>

    <button class="btn-logout" (click)="logout()">
      Cerrar sesiÃ³n
    </button>
  </div>

  <div class="fecha-box">
    <label>Selecciona fecha:</label>
    <input type="date"
           [(ngModel)]="fechaSeleccionada"
           (change)="onFechaChange()">

    <p *ngIf="mostrarErrorFecha" class="error-text">Debes seleccionar una fecha.</p>
  </div>

  <h3 class="prof-title">Profesionales disponibles</h3>

  <div class="profesionales-grid">

    <div class="prof-card" *ngFor="let p of profesionales">
      
      <img class="prof-img"
           [src]="p.imagen"
           [alt]="p.nombre">

      <h4 class="prof-nombre">{{ p.nombre }}</h4>
      <p class="prof-especialidad">{{ p.especialidad }}</p>
      <p class="prof-descripcion">{{ p.descripcion }}</p>

      <p class="ver-horas-label">Selecciona una hora disponible:</p>

      <button class="btn-ver-horas" (click)="cargarOcupadas(p)">
        Ver horas
      </button>

      <div class="horas-list" *ngIf="ocupadasMap[p.id] !== undefined">
        <button class="hora-btn"
                *ngFor="let h of horasDisponibles"
                [disabled]="(ocupadasMap[p.id] || []).includes(h)"
                [class.selected]="selectedHora[p.id] === h"
                (click)="selectHora(p.id, h)">
          {{ h }}
        </button>
      </div>

      <p *ngIf="mostrarErrorHora && !selectedHora[p.id]" class="error-text">Selecciona una hora antes de agendar.</p>

      <button class="btn-agendar"
              (click)="agendar(p)">
        Agendar cita
      </button>

    </div>

  </div>

  <div class="turnos-link">
    <a (click)="verTurnos()">Ver mis turnos</a>
  </div>

  <footer>
    <p>Â© 2025 Psico-Agenda â€” AtenciÃ³n profesional con el corazÃ³n ðŸ’™</p>
    <p>Desarrollado por Andresito22idk</p>
  </footer>
</div>
